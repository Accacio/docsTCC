
\chapter{Control and Identification}
\label{chap:controlAndIdent}

\begin{figure}[H]
  \centering
 \includegraphics[height=0.7\textwidth]{hmi_mobile2}
  \caption{HMI on mobile.}
  \label{fig:hmi_mobile}
\end{figure}



\addtikzfigureLandscape{../../figures/petriNet/partial/initial}
{Petri net of Initialization module.}
{petriinitialization}
\newpage
\input{../../figures/petriNet/partial/initialPlaces}
\input{../../figures/petriNet/partial/initialTransitions}
\newpage
\addtikzfigureLandscape{../../figures/petriNet/partial/metalv}
{Petri net of metal cube half sorting module.}
{petrimetal}
\newpage
\input{../../figures/petriNet/partial/metalvPlaces}
\input{../../figures/petriNet/partial/metalvTransitions}
\newpage
\addtikzfigureLandscape{../../figures/petriNet/partial/plastic}
{Petri net of plastic cube half sorting module.}
{petriplastic}
\newpage
\input{../../figures/petriNet/partial/plasticPlaces}
\input{../../figures/petriNet/partial/plasticTransitions}
\newpage
\addtikzfigureLandscape{../../figures/petriNet/partial/armBeltToPress}
{Petri net of manipulator taking a cube half from conveyor belt to assembly unit
  module.}
{petriarmBeltToPress}
\newpage
\input{../../figures/petriNet/partial/armBeltToPressPlaces}
\input{../../figures/petriNet/partial/armBeltToPressTransitions}
\clearpage
\pagebreak
\addtikzfigureLandscape{../../figures/petriNet/partial/press}
{Petri net of assembly unit module.}
{petripress}
\newpage
\input{../../figures/petriNet/partial/pressPlaces}
\input{../../figures/petriNet/partial/pressTransitions}
\newpage
\addtikzfigureLandscape{../../figures/petriNet/partial/armPressToStorage}
{Petri net of manipulator taking cube from assembly unit to storage module.}
{petriarmPressToStorage}
\newpage
\input{../../figures/petriNet/partial/armPressToStoragePlaces}
\input{../../figures/petriNet/partial/armPressToStorageTransitions}
\newpage
\addtikzfigureLandscape{../../figures/petriNet/partial/storageY}
{Petri net of storage unit positioning module (y axis).}
{petristorageY}
\newpage
\input{../../figures/petriNet/partial/storageYPlaces}
\input{../../figures/petriNet/partial/storageYTransitions}
\newpage
\addtikzfigureLandscape{../../figures/petriNet/partial/storageX}
{Petri net of storage unit positioning module (x axis).}
{petristorageX}
\newpage
\input{../../figures/petriNet/partial/storageXPlaces}
\input{../../figures/petriNet/partial/storageXTransitions}
\newpage
\addtikzfigureLandscape{../../figures/petriNet/partial/storePiece}
{Petri net of cube storage module.}
{petristorePiece}
\newpage

\input{../../figures/petriNet/partial/storePiecePlaces}
\input{../../figures/petriNet/partial/storePieceTransitions}

\newpage

\begin{figure}[H]
  \centering
  \begin{tikzpicture}
    \node[anchor=south west,inner sep=0] (image) at (0,0) {
      \includegraphics[trim={20cm 0 30cm 20cm},clip,width=0.8\textwidth]{maquete/armAngles.jpg}
    };
    % \draw[red,ultra thick,rounded corners] (0,0) rectangle (9.4,6.2);
    \begin{scope}[x={(image.south east)},y={(image.north west)}]
        % \draw[help lines,xstep=.1,ystep=.1] (0,0) grid (1,1);
        % \foreach \x in {0,1,...,9} { \node [anchor=north] at (\x/10,0) {0.\x}; }
        % \foreach \y in {0,1,...,9} { \node [anchor=east] at (0,\y/10) {0.\y}; }a
        
      
        \draw[red,->,>=stealth,very thick] (0.48,0.9) -- ++(-50:0.7);
        \draw[red,->,>=stealth,very thick] (0.48,0.9) -- ++(-95:0.7);
        \draw[red,->,>=stealth,very thick] (0.48,0.9) -- ++(-120:0.7);

        \draw[fill=red, fill opacity=0.2,draw=none] (0.48,0.9) -- ([shift=(-50:0.5)]0.48,0.9) arc (-50:-95:0.5);
        \draw[fill=blue, fill opacity=0.2,draw=none] (0.48,0.9) -- ([shift=(-95:0.5)]0.48,0.9) arc (-95:-120:0.5);

        \draw [fill,white,fill opacity=0.7,draw=none] (0.02,0.23) rectangle ++ (0.35,0.06);
        \draw [black] (0.2,0.25) node {\tiny \textbf{STORAGE\_ANGLE\_BEFORE}};

        \draw [fill,white,fill opacity=0.7,draw=none] (0.25,0.13) rectangle ++ (0.3,0.06);
        \draw [black] (0.4,0.15) node {\tiny \textbf{PRESS\_ANGLE\_AFTER}};

        \draw [fill,white,fill opacity=0.7,draw=none] (0.7,0.28) rectangle ++ (0.3,0.06);
        \draw [black] (0.85,0.3) node {\tiny \textbf{PRESS\_ANGLE\_BEFORE}};

        \draw [fill,white,fill opacity=0.7,draw=none] (0.1,0.82) rectangle  (0.2,0.96);
        \draw [red,thick] ([shift=(0:0.03)]0.15,0.9) arc (0:180:0.03);
        \draw[black,->,>=stealth,very thick] (0.15,0.85) -- ++(0,0.1);
        \draw [red,->,>=stealth,thick] ([shift=(0:-0.03)]0.15,0.9) arc (-180:-20:0.03);

      \end{scope}
  \end{tikzpicture}
  \caption{Arm Stop Logic Angles}
\end{figure}

\addtikzfigureLandscape{../../figures/petriNet/partial/armStopLogic}
{Petri net of manipulator Stop Logic module.}
{petriarmStopLogic}

\newpage

\input{../../figures/petriNet/partial/armStopLogicPlaces}
\input{../../figures/petriNet/partial/armStopLogicTransitions}

A tutorial on how to configure the connection between two \PLCs can be seen in
section 3.4 of \cite{rochapereira2019automacao}




The implementation of the complete Petri Net divided between the two \PLCs was
made in Ladder using the methods shown in \autoref{cha:background}  and for
brevity's sake the ladder logic was concealed, but can easily be
found at the following link
\url{https://github.com/Accacio/docsTCC/tree/master/PLC/TCC}.

As for the
complete Petri Net, it can be seen in \autoref{chap:CompletePetriNet} 

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../monografia"
%%% End:
